<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Zeeslag</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="icon"
      type="image/png"
      href="afbeeldingen/channels4_profile.jpg"
    />
    <style>
      /* --- Alleen game elementen --- */
      .game-container {
        margin-left: 230px;
        padding: 20px;
        max-width: 700px;
      }

      .game-box {
        background: #fff8ef;
        border: 2px solid #612b12;
        border-radius: 16px;
        padding: 20px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        text-align: center;
      }

      /* Titel */
      .game-box h1 {
        margin-top: 0;
        font-size: 28px;
        color: #612b12;
        text-shadow: 1px 1px #dabc8a;
      }

      /* Controls */
      .game-box .controls {
        margin: 15px 0;
      }
      .game-box .controls select,
      .game-box .controls button {
        padding: 8px 12px;
        border-radius: 8px;
        border: 1px solid #612b12;
        background: #dabc8a;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s;
      }
      .game-box .controls button:hover,
      .game-box .controls select:hover {
        background: #c49b6e;
      }

      /* Bord */
      .game-box .board {
        display: grid;
        gap: 2px;
        justify-content: center;
        margin: 20px auto;
      }
      .game-box .cell {
        background-color: #dabc8a;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        border: 1px solid #612b12;
        font-weight: bold;
        font-size: 18px;
        transition: transform 0.3s, background-color 0.3s;
        border-radius: 6px;
      }
      .game-box .hit {
        background-color: red;
        color: white;
        transform: scale(1.2);
      }
      .game-box .miss {
        background-color: lightblue;
        transform: scale(1.1);
      }
      .game-box .sunk {
        background-color: darkred;
        color: white;
        animation: pulse 0.6s ease infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.2);
        }
        100% {
          transform: scale(1);
        }
      }

      /* Status en schepen */
      .game-box .status {
        margin-top: 15px;
        font-weight: bold;
        font-size: 20px;
        min-height: 30px;
        color: #612b12;
      }
      .game-box .ship-count {
        font-size: 18px;
        margin-top: 10px;
        color: #333;
      }
    </style>
  </head>
  <body>
    <!-- NAVBAR -->
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="home.html">geld</a></li>
      <li><a class="active" href="chatgpt.html">chatgptgame</a></li>
      <li><a href="binairstelsel.html">Binairstelsel</a></li>
      <li>
        <a href="Invoer - verwerking - uitvoer.html"
          >Invoer - verwerking - uitvoer</a
        >
      </li>
      <li><a href="compressie.html">Compressie</a></li>
      <li><a href="kleurmodellen.html">Kleurmodellen</a></li>
    </ul>

    <!-- GAME CONTENT -->
    <div class="game-container">
      <div class="game-box">
        <div class="controls">
          Bord grootte:
          <select id="boardSize">
            <option value="8" selected>8x8</option>
            <option value="10">10x10</option>
          </select>
          <button id="resetBtn">Reset Spel</button>
        </div>
        <div class="ship-count" id="shipCount"></div>
        <div class="board" id="board"></div>
        <div class="status" id="status">Zet een schot...</div>
      </div>
    </div>

    <script>
      const boardEl = document.getElementById("board");
      const statusEl = document.getElementById("status");
      const shipCountEl = document.getElementById("shipCount");
      const resetBtn = document.getElementById("resetBtn");
      const boardSizeSelect = document.getElementById("boardSize");

      let size, ships, hits, totalShips;

      function initGame() {
        boardEl.innerHTML = "";
        size = parseInt(boardSizeSelect.value);
        hits = 0;
        ships = [];
        const shipSizes = [4, 3, 3, 2, 2, 1]; // vaste schepen van verschillende groottes
        totalShips = shipSizes.length;

        for (let sz of shipSizes) placeShip(sz);

        boardEl.style.gridTemplateColumns = `repeat(${size}, 40px)`;
        boardEl.style.gridTemplateRows = `repeat(${size}, 40px)`;

        for (let r = 0; r < size; r++) {
          for (let c = 0; c < size; c++) {
            const cell = document.createElement("div");
            cell.className = "cell";
            cell.dataset.row = r;
            cell.dataset.col = c;
            cell.addEventListener("click", shoot);
            boardEl.appendChild(cell);
          }
        }

        updateShipCount();
        statusEl.textContent = "Zet een schot...";
      }

      function placeShip(length) {
        let placed = false;
        while (!placed) {
          const r = Math.floor(Math.random() * size);
          const c = Math.floor(Math.random() * size);
          const horizontal = Math.random() < 0.5;
          let coords = [];
          for (let i = 0; i < length; i++) {
            const nr = r + (horizontal ? 0 : i);
            const nc = c + (horizontal ? i : 0);
            if (nr >= size || nc >= size) {
              coords = [];
              break;
            }
            coords.push(nr + "," + nc);
          }
          if (
            coords.length === length &&
            !coords.some((k) => ships.some((ship) => ship.includes(k)))
          ) {
            ships.push(coords);
            placed = true;
          }
        }
      }

      function shoot(e) {
        const cell = e.currentTarget;
        const key = cell.dataset.row + "," + cell.dataset.col;
        if (
          cell.classList.contains("hit") ||
          cell.classList.contains("miss") ||
          cell.classList.contains("sunk")
        )
          return;

        let hitShip = ships.find((ship) => ship.includes(key));
        if (hitShip) {
          cell.classList.add("hit");
          hits++;
          statusEl.textContent = "ðŸ”¥ Raak!";
          animateHit(cell);
          if (
            hitShip.every((k) => {
              const [r, c] = k.split(",");
              return (
                document
                  .querySelector(`.cell[data-row='${r}'][data-col='${c}']`)
                  .classList.contains("hit") ||
                document
                  .querySelector(`.cell[data-row='${r}'][data-col='${c}']`)
                  .classList.contains("sunk")
              );
            })
          ) {
            hitShip.forEach((k) => {
              const [r, c] = k.split(",");
              const cellSunk = document.querySelector(
                `.cell[data-row='${r}'][data-col='${c}']`
              );
              cellSunk.classList.remove("hit");
              cellSunk.classList.add("sunk");
            });
            statusEl.textContent = "ðŸ’¥ Boot gezonken!";
          }
        } else {
          cell.classList.add("miss");
          statusEl.textContent = "ðŸŒŠ Mis!";
          animateMiss(cell);
        }

        updateShipCount();

        if (document.querySelectorAll(".sunk").length === ships.flat().length) {
          statusEl.textContent =
            "ðŸŽ‰ Gefeliciteerd! Alle schepen zijn gezonken!";
        }
      }

      function updateShipCount() {
        const remaining = ships.filter(
          (ship) =>
            !ship.every((k) =>
              document
                .querySelector(
                  `.cell[data-row='${k.split(",")[0]}'][data-col='${
                    k.split(",")[1]
                  }']`
                )
                .classList.contains("sunk")
            )
        );
        shipCountEl.textContent = `Schepen over: ${remaining.length} / ${totalShips}`;
      }

      function animateHit(cell) {
        cell.style.transform = "scale(1.3)";
        setTimeout(() => (cell.style.transform = "scale(1)"), 300);
      }

      function animateMiss(cell) {
        cell.style.transform = "rotate(-10deg)";
        setTimeout(() => (cell.style.transform = "rotate(10deg)"), 150);
        setTimeout(() => (cell.style.transform = "rotate(0deg)"), 300);
      }

      resetBtn.addEventListener("click", initGame);
      boardSizeSelect.addEventListener("change", initGame);

      initGame();
    </script>
  </body>
</html>
